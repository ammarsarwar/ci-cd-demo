name: Production CI-CD

# THE TRIGGER: When should this run?
on:
  push:
    branches: [ "main" ]  # Only run when code is pushed to the main branch

# THE ENVIRONMENT: Where does the code run?
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest # GitHub provides a fresh Linux VM

    # THE STEPS: What exactly happens?
    steps:
      - name: 1. Checkout Code
        uses: actions/checkout@v4 # Action: Downloads your repo code to the VM

      - name: 2. Set up Node.js
        uses: actions/setup-node@v4 # Action: Installs Node environment
        with:
          node-version: '20'

      - name: 3. Install Dependencies
        run: npm install # Command: Installs packages from package.json

      - name: 4. Run Build Script
        run: ./scripts/deploy.sh # Command: Runs your custom Linux logic
